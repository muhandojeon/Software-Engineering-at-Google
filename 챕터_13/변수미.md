실제 구현 대신 사용할 수 있는 객체나 함수

##### 구글이 어렵게 깨우친 교훈

하나는 테스트 대역을 쉽게 만들어주는 모의 객체 프레임워크를 과용하면 위험하다
-> 테스트를 작성하기는 쉬웠지만 버그는 잘 찾아내지 못했고 끊임없이 보수해야 하였고.
-> 오늘날에는 많은 엔지니어가 모의 객체 프레임워크를 피하고 실제에 더 가까운 테스트를 작성한다.

### 테스트 대역 활용 기법

- 속이기 (가짜 객체)
- 뭉개기(스텁)
  - 스텁 : 원래는 없던 행위를 부여하는 과정
- 상호작용 테스트하기
  - 대상함수를 실제로 호출하지 않고도, 그 함수가 '어떻게' 호출되었는지 검증하는 기법

#### 속이기(가짜 객체)

- 빠르고, 실제 객체를 사용할 때의 단점을 제거한 채 테스트를 효과적으로 수행할 수 있다.
- `가짜 객체의 유지보수` vs `가짜 객체를 사용해서 얻는 유지보수`를 잘 저울질 해야한다.
- 진짜 객체를 사용하지 못하는 근본적인 원인을 파악, 해당 코드만 가짜 객체로 만든다.

#### 뭉개기 (스텁)

- 원래는 없는 행위를 테스트가 함수에 덧씌우는 방법
- 과용하면 테스트를 유지보수할 일이 늘어난다.
  - 스텁을 이용하면 내부 구현이 테스트에 드러나면서, 깨지기 쉬워진다.

#### 상호작용 테스트하기

- 대상함수의 구현을 '호출하지 않으면서' 그 함수가 어떻게 호출되는지 검증하는 기법
- 모의 객체 프레임워크를 활용하면 쉽게 수행할 수 있다. (하지만 진짜 필요할때만 적용하자)

### 핵심 정리

• 테스트 대역보다는 되도록 실제 구현을 사용해야 한다.
• 테스트에서 실제 구현을 사용할 수 없을 때는 가짜 객체가 최선일 때가 많다.
• 스텁을 과용하면 테스트가 불명확해지고 깨지기 쉬워진다.
• 상호작용 테스트는 되도록 피하는 게 좋다. 상호작용 테스트는 대상 시스템의 상세 구현 방식을 노출하기 때문에 테스트를 깨지기 쉽게 만든다.
