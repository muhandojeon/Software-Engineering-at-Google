# 테스트 개요

- 테스트 체계가 잘 갖춰져 있다면 변화를 두려워할 이유가 없다

> 뭐 당연한 얘기지만 ... 테스트를 작성하면 설계를 더 잘하게 된다 + 변경에 용기를 가질 수 있게 된다
> 라는 생각을 가지고 있어요 저도

## 테스트를 작성하는 이유

- 나쁜 테스트 스위트는 테스트가 아예 없는 것만 못하다

> 낙후된 테스트는 그냥 삭제하고 다시 작성하는 것도 괜찮더라구요 

- 디버깅 감소
- 자신 있게 변경
- 더 나은 문서자료
- 더 단순한 리뷰
- 사려 깊은 설계
  - 테스트하기 어려운 코드는 너무 많은 역할을 짊어지거나 의존성을 관리하기 어렵게 짜여졌기 때문일 가능성이 크다
- 고품질의 릴리스를 빠르게

## 테스트 스위트 설계하기

- 구글은 작은/중간/큰 으로 나눔

- 테스트 결과가 불규칙한 상황이 계속되면 생산성 저하보다 더한 일도 겪게 됨. 그것은 테스트를 믿지 못하는 상황

- 실제로 구글은 단위 테스트 80% / 통합 테스트 15% / 종단간 테스트 5% 정도가 되도록 함

> 현실 세계에서는 단위, 통합 테스트 짤 여력도 없음 (지금은)

- 비욘세 규칙
  - 네가 좋아 했다면 테스트를 준비해뒀어야지

### 코드 커버리지

- 코드 커버리는 테스트되지 않은 코드가 어디인지는 알려줄 수 있지만  
  - 시스템이 얼마나 제대로 테스트되었느냐를 판가름하는 지표로는 적합하지 않음

## 구글 규모의 테스트

- 깨지기 쉬운 테스트를 만드는 주범으로는 모의 객체 오용을 들 수 있음
  - 구글의 코드베이스는 한때 오용하여 큰 난리를 치러 '다시는 모의 객체를 쓰지 않겠어'라고 선언한 엔지니어들도 생겨낫음

## 구글의 테스트 역사

### 오리엔테이션 수업

- 초기 엔지니어 상당수가 테스트를 기피함
  - 테스트 선구자들은 회사가 빠르게 성장하고 있으니, 앞으로는 뉴비들이 더 많겠다 싶어서
  - 이들의 오리엔테이션 시간에 테스트의 가치를 한 시간 수업함
  - 트로이목마로 사용됨
  - 결과는 해피엔딩 ...

### 화장실에서도 테스트

- 변기 앞에 전단지를 붙여둠
  - 개인 공간을 침범했다며 강하게 항의도 했음
  - 현재까지 구글 엔지니어들은 테스트에서 상상할 수 있는 거의 모든 측면을 다루는 수백 편의 TotT를 제작


### 프로젝트 건실성

Project Health

## 핵심 정리

- 네가 좋아했다면 테스트를 준비해뒀어야지
