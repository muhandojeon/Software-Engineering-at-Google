## 대규모 변경이란?

- LSC: Large Scale Change
- 논리적으로는 연관되어 있으나 현실적인 한계 때문에 원자적으로 서브밋할 수 없는 변경들의 집합
- 구글에서는 대부분 자동화 도구를 통해 생성, 상당 부분 인프라팀이 수행

## 원자적 변경을 가로막는 요인

- 기술적 한계(어렵다가 아니라 '못한다')
- 병합 충돌
  - 변경하는 파일이 적다면 병합 충돌 확률이 작다.
  - 그래서 문제없이 커밋될 가능성이 높다.
- 유령의 묘지
  - 오래되고 둔해서 아무도 손대려 하지 않는 시스템
  - 잘못 손댔다가 시스템에 문제 발생
  - 많은 위험을 내재하며 자운도 과도하게 소비하기 쉽다.
  - 충실한 테스트가 아주 효과적인 대안
- 이질성
  - LSC를 위해 사람이 아닌 컴퓨터가 처리할 것
  - 일관된, 단순한 환경은 변경을 자동으로 수행하는 데에 좋다.
- 테스트
  - 모든 변경은 테스트되어야 한다.
  - 변경의 덩치가 커지만 제대로 테스트하기 훨씬 어렵다.
- 코드 리뷰
  - 거대한 커밋을 검토하는 건 지루하고 번거롭고 오류가 스며들기 쉽다.
  - 특히 수동으로 만든 변경이라면 더더욱.

## 대규모 변경 프로세스

- 권한 부여
- 변경 생성
- 샤드 관리
- 마무리 청소

## 핵심 정리

- LSC에 성공하려면 LSC를 습관처럼 진행해야 한다.
- 코드베이스는 너무 오래되면 점점 고치기 어려워진다.
- 꾸준히, 조금씩 개선할 것

## 총평

구글은 자동화를 안 하는 곳이 없네요. 특히 대규모 변경에서 수천 개의 파일을 자동화하고, 이를 위해 모호하지 않은 명확하고 단일화된 환경을 구축해놓는다는 게 신기합니다. 물론 LSC를 포함한 여러 자동화를 위한 단일의 환경이겠지만, 대단하네요.
