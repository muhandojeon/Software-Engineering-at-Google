# 버전 관리와 브랜치 관리


## 브랜치 관리

- 제품 안정성 유지 차원에서 개발 브랜치를 과하게 사용하는 버전 관리 정책은 근본적으로 잘못되었다고 생각한다.
  - 큰 단위로 한꺼번에 병합하기보다는 작게 자주 병합하는게 쉽다
  - 거대한 개발 브랜치를 병합할 때는 많은 것이 변경된 상태이므로 문제 원인이라고 예상되는 범위를 좁히기 얼벼다.
  - 문제를 분류하고 근본 원인을 파악해내기 어렵고, 수정하기는 더욱 어렵다

> 저도 개발 브랜치 싫어하긴함
> 책 내용도 비슷하지만, 생산성있는 행동이라고 생각되지 않았음

### 릴리스 브랜치

- 개발 브랜치와 달리 릴리스 브랜치는 대체로 무해함
  - 생을 마감하는 모습이 다른데, 개발 브랜치는 트렁크에 다시 병합하거나 다른 팀이 브랜치를 추가할 수 있지만
  - 릴리스 브랜치는 홀로 존재하다가 결국 사라짐

> 개인적으로 QA 릴리스 브랜치를 자주 사용함
> 다른 개발자들이 리뷰하기 쉽도록 PR을 잘게 분리하고
> 팀원들과 QA하기 위해 잘게 분리한 브랜치들을 하나로 엮어 QA 배포하는 형태로 자주 사용해여

## 버전 관리 @ 구글

- 자체 개발한 중앙집중형 VCS를 이용함
  - piper라는 이름
  - 80테라바이트가 넘는 콘텐츠와 메타데이터를 담고 있음

## 모노리포

- 결국 어떤 파일시스템을 선택하느냐보다 그 안에 무엇을 담느냐가 더 중요

## 마치며

- 선택에는 대가가 따른다. 구글은 원-버전 규칙을 적극 권장한다.
  - 개발자들이 어디로 커밋해야 할지, 혹은 어느 버전을 이용해야 할지를 선택할 수 없어야 한다
  - 조직 전반에 이만큼 큰 영향을 주는 정책은 몇 없는데, 개별 개발자에게는 성가실 수 있지만 종합적으로 보면 결과가 훨씬 좋다

