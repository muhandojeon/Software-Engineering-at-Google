# 코드 리뷰
* 구글은 조직별로 전체의 변경 검토를 전담하는 그룹을 두기도 하고, 몇 개의 작은 팀을 두어 팀별로 검토하며 수준을 달리 진행함

## 코드 리뷰 흐름

> 애네들은 메일을 보내 리뷰를 요청한다 함 ㅋㅋ

* 코드는 부채다
  + 코드가 그 자체로 부채임을 인정하고 잊지 말아야 한다.
  + 없어서는 안 될 부채이긴 하겠으나 존재만으로 어느 순간 누군가가 유지보수해야 할 대상이 되어버린다
  + 마치 비행기의 연료처럼 비행기를 띄우려면 반드시 필요하지만, 그 자체가 하중을 늘려 부담으로 작용함

## 코드 리뷰 @ 구글

* 구글에서는 어떤 변경이든 '승인'을 얻으려면 세 가지 측면에서의 리뷰를 통과해야 한다

1. 다른 엔지니어로부터 정확성과 이해 용이성을 평가받는다
2. 변경되는 코드 영역을 관리하는 코드 소유자로부터 변경이 적절하다는 승인을 받는다
3. 가독성 승인을 받는다

> 너무 늘어지지 않을까 싶긴 한데, (대부분) 속도가 중요한 가치가 아닐 거 같기도 하고
> 여러 롤을 가지고 있는 한 명한테 받아도 되기도 한다니 뭐 ..

## 소유권

* 구글에서는 소스 코드가 소유자의 것이라는 뜻이 아니라, 회사가 추구하는 가치가 지켜지도록 관리한다는 의미의 소유

> 깃허브의 CODEOWNERS도 디렉터리 별로 관리할 수 있게끔 되어 있는데, 같은 형태인듯

## 코드 리뷰의 이점

* 신기술에 신속하게 대응해야 하는 역동적인 회사에 엄격한 프로세스는 적합하지 않으며 창의적인 직업에 관료적인 규칙들은 해가 된다 생각한다. 하지만 코드 리뷰는 구글스의 소프트웨어 엔지니어 모두가 반드시 따라야 하는 몇 안 되는 전사적인 프로세스

### 코드 정확성

* 리뷰어가 대안을 제시하는 건 가능하지만 이해하기 더 쉽거나, 기능을 개선하는 대안일 경우에만 그리 해야 한다
  + 구글은 새로운 코드가 '완벽하다'고 합의될 때까지 기다리지 않고 코드베이스를 개선한다고 인정되면 변경을 승인하도록 안내한다.

### 코드 이해 용이성

* 코드는 작성되는 횟수보다 읽히는 횟수가 몇 배는 많으므로 이해하기 쉽게 작성하는 게 매우 중요하다

> 되게 많이 말함

### 코드 일관성

- 떄로는 일관성을 위해 기능성을 희생해야 할 때도 있다.

### 심리적 문화적 이점

- 소프트웨어 엔지니어에게 코드는 '자신의 것'이 아니라 협업을 통해 만들어지는 '조직 공동 소유물'임을 인식시켜주는 효과


- 비판적인 리뷰를 받게 되면 업무 평가가 나빠지지는 않을까 하는 우려 때문에 새로 합류한 많은 엔지니어가 코드리뷰에 겁을 낸다
  - 하지만 많은 엔지니어가 코드 리뷰 요청을 보내면서 비판을 예상하고, 오히려 값진 조언과 질문을 받을 수 있어 유용하다고 생각하게 변함

- 코드 리뷰를 필수라고 못박으면 작성자들에게 자신의 코드를 한번 더 들여다보게 하는 효과가 생김
- 요청 직전의 짧은 시간이 자신이 변경한 것을 다시 훑어보고 혹시나 빠진 건 없는지 확인하기에 가장 완벽한 시간
> 공감 .. 맨날 PR 올리고 셀프 리뷰하다가 추가 커밋함..


## 코드 리뷰 모범 사례

- 구글은 신뢰와 존중 문화를 조성하기 위해 심혈을 기울인다
  - 이 문화는 구글이 코드 리뷰를 수행하는 방식에까지 영향을 준다

- 일반적으로 이뷰어들은 작성자가 선택한 방식을 존중하고 오직 그 방식에 결함이 있을 때만 대안을 제시해야 한다.
- 작성자가 다른 대안 중 특별히 더 우수한 게 없음을 설명할 수 있다면 리뷰어들은 작성자의 취향을 받아들여야 한다.
- 작성자가 선택한 방식에서 결함을 찾게 되면 배움의 기회로 생각하면 된다
- 모든 논평은 철저하게 전문적이어야 하고, 리뷰어는 작성자의 방식에 대해 성급히 결론짓지 않게 주의해야 한다.
- **그 방식이 잘못되엇다고 가정하기 전에 그렇게 처리하게 된 이유가 무엇인지부터 물어보는 게 좋다**

### 작게 변경하기

### 변경 설명 잘쓰기

- 만약 리뷰어가 코드를 이해하지 못한다면 비록 올바르게 동작하는 코드일지라도 구조를 개선하거나 주석을 더 잘 달아놔야 한다는 신호일 수 있다

### 리뷰어는 최소한으로

- 첫 번째 LGTM이 가장 중요하며, 두 번째부터는 크게 신경 쓸 만큼의 가치가 없다는 걸 발견
  - 리뷰어를 추가해서 얻는 가치보다 비용이 훨씬 빠르게 증가하여 금세 역전됨

## 핵심 정리

- 코드베이스 전반의 정확성, 이해 용이성, 일관성 보장 등 코드 리뷰가 주는 이점이 많다
- 전문가다움을 지키면서 중요한 피드백을 받을 기회를 제공해라
- 코드 리뷰 프로세스를 확장하려면 자동화가 아주 중요하다
> 사례 ...
> 코드래빗 etc ..