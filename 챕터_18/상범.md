# 챕터 18 빌드 시스템과 빌드 철학

## 빌드 시스템의 목적

과거 빌드 시스템들은 속도와 정확성 사이에서 절충 하려다 보니 빌드 결과가 일관되지 못하는 문제를 겪었음

Bazel의 주된 목표는 속도와 정확성 어느 하나 희생하지 않고 빌드 시스템이 언제나 효율적이게 작동하면서 일관된 빌드를 수행하는 것이 목표

### 태스크 기반 빌드 시스템

e.g. 셸 스크립트, Ant, Maven, Gradle, Grunt, Rake

태스크 기반 빌드 시스템은 태스크 모듈화 하고, 빌드 파일 작성해야 되고, 태스크 실행할 도구 제공해야 하고, 그 사이의 의존성을 관리해줘야 함

#### 태스크 기반 빌드 시스템의 어두운 면

1. 빌드 단계들을 병렬로 실행하기 어려운 점

요즘 컴퓨터들은 멀티코어가 기본이라 이론적으로 빌드 단계를 병렬로 실행 가능 함

근데 문제는 그게 아님. 태스크 A가 태스크 B와 C에 의존한다고 하고, B와 C는 서로 의존 안한다 해보자. 같은 자원을 사용하는게 없어서 안전할 수 있겠지만 실제 구현에서는 상태 추적같은걸 사용하면 충돌이 생길 수 있다고 함;;

2. 증분 빌드 수행하기가 어려움

태스크는 무슨일이든 할 수 있으므로 일반적으로 이미 실행됐는지를 확인 할 방법이 없음 (변경 여부를 확신 할 수가 없음;)

이 문제를 영리한 엔지니어들이 묘책인 듯 묘책 아닌 꼼수를 통해 해결했다고 치자. 이거 떄문에 원인을 찾기 어려운 혼란에 빠지기도 해서(디버깅 어려움) 여전히 어려움이 있음

3. 스크립트를 유지보수하고 디버깅하기 어려움

빌드 스크립트가 커져서 복잡해질수록 다루기가 어려워짐

----

결국, 태스크 기반 빌드 시스템은 '엔지니어에게는 너무 많은 힘을, 시스템에는 충분하지 못한 힘을 주게 됨'

태스크 기반 프레임워크에서는 성능, 정확성, 유지보수성 문제를 한꺼번에 해결할 수 있는 방법이 없다~~

이 문제를 풀려면 엔지니어 손에 주어진 힘 일부를 빼앗아 시스템에 맡기면 된다!

즉, 시스템이 태스크를 실행한다는 개념에서 벗어나 아티팩트를 만들어낸다는 쪽으로 생각을 해낸거고, 구글의 Bazel이 그렇게 만들어졌다

### 아티팩트 기반 빌드 시스템

엔지니어는 시스템에게 '무엇'을 빌드할지 정해줄 수 있지만 '어떻게'는 시스템이 알아서 하도록 맡기는 것

빌드 프로세스를 태스크 중심 => 아티팩트 중심으로 재구성하는 일은 미묘하지만 강력하다고 함

프로그래머 입장에서는 유연성이 줄어드는 대신 빌드의 각 단계에서 무슨 일이 이루어지는지를 빌드 시스템이 알게 되고, 이 지식을 활용하여 빌드 프로세스를 병렬화하고 최대한 많은 것을 재사용하여 효율을 극대화 시킴

## 마치며

> '떄로는 엔지니어의 힘과 유연성을 제한해야 생산성을 높일 수 있다' 라는 말에 깊이 공감했습니다
> 
> 이는 디자인 시스템에서도 인터페이스의 유연성을 제한함으로써 개발 효율과 일관성을 높이는 맥락과도 연결된다고 생각합니다~
>
> 출근하면서 지하철에서 본 아티클에서 본 글이 생각나서 공유해봅니다~
>
> 프론트엔드로서 선언형으로 "무엇을" 해결할지를 빠르게 표현하고, 그 "어떻게"에 대한 구현은 프레임워크에 위임하는 방향으로 점점 발전해간다고 생각함   
> 프레임워크가 제공하는 선언형 인터페이스 그리고 우리가 선언형으로 코딩하려는 것은 더 많은 제약을 주기도 하지만, 그만큼 생산성과 안정성을 끌어올리는 데 큰 기여를 해주고 있다
> > [하이라이트 링크](https://velog.io/@endmoseung/declaritive-component#:~:text=%EC%9A%B0%EB%A6%AC%EB%8A%94%20%EC%84%A0%EC%96%B8%ED%98%95%EC%9C%BC%EB%A1%9C%20%22%EB%AC%B4%EC%97%87%EC%9D%84%22%20%ED%95%B4%EA%B2%B0%ED%95%A0%EC%A7%80%EB%A5%BC%20%EB%B9%A0%EB%A5%B4%EA%B2%8C%20%ED%91%9C%ED%98%84%ED%95%98%EA%B3%A0%2C%20%EA%B7%B8%20%22%EC%96%B4%EB%96%BB%EA%B2%8C%22%EC%97%90%20%EB%8C%80%ED%95%9C%20%EA%B5%AC%ED%98%84%EC%9D%80%20%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC%EC%97%90%20%EC%9C%84%EC%9E%84%ED%95%98%EB%8A%94%20%EB%B0%A9%ED%96%A5%EC%9C%BC%EB%A1%9C%20%EC%A0%90%EC%A0%90%20%EB%B0%9C%EC%A0%84%ED%95%B4%EC%99%94%EC%8A%B5%EB%8B%88%EB%8B%A4.%0A%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC%EA%B0%80%20%EC%A0%9C%EA%B3%B5%ED%95%98%EB%8A%94%20%EC%84%A0%EC%96%B8%ED%98%95%20%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%20%EA%B7%B8%EB%A6%AC%EA%B3%A0%20%EC%9A%B0%EB%A6%AC%EA%B0%80%20%EC%84%A0%EC%96%B8%ED%98%95%EC%9C%BC%EB%A1%9C%20%EC%BD%94%EB%94%A9%ED%95%98%EB%A0%A4%EB%8A%94%EA%B2%83%EC%9D%80%20%EB%8D%94%20%EB%A7%8E%EC%9D%80%20%EC%A0%9C%EC%95%BD%EC%9D%84%20%EC%A3%BC%EA%B8%B0%EB%8F%84%20%ED%95%98%EC%A7%80%EB%A7%8C%2C%20%EA%B7%B8%EB%A7%8C%ED%81%BC%20%EC%83%9D%EC%82%B0%EC%84%B1%EA%B3%BC%20%EC%95%88%EC%A0%95%EC%84%B1%EC%9D%84%20%EB%81%8C%EC%96%B4%EC%98%AC%EB%A6%AC%EB%8A%94%20%EB%8D%B0%20%ED%81%B0%20%EA%B8%B0%EC%97%AC%EB%A5%BC%20%ED%95%B4%EC%A3%BC%EA%B3%A0%20%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4.)
