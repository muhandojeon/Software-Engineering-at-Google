# 단위 테스트
* 작은 테스트는 빠르고 결정적이어서 개발자들이 수시로 수행하며 피드백을 즉각 얻을 수 있음
* 단위 테스트는 대체로 대상 코드와 동시에 작성할 수 있을 만큼 작성하기 쉬움. 그래서 작성 중인 코드를 검증하는 데 집중할 수 있음
* 실패 시 원인을 파악하기 쉬움
* 대상 시스템의 사용법과 의도한 동작 방식을 알려주는 문서자료 혹은 예제 코드 역할을 해줌

## 깨지기 쉬운 테스트 예방하기

* 변하지 않는 테스트로 만들기 위해 노력하자
  + 언제 코드를 변경하나?
    - 순수 리팩터링
    - 기능 추가
    - 버그 수정
    - 행위 변경
  + 요점은 리팩터링, 새 기능 추가, 버그 수정 시에는 기존 테스트를 손볼 일 없어야 한다는 것
  
* 인터페이스를 테스트해라
  + 구현을 테스트하지말고

## 명확한 테스트 작성하기

* 테스트가 실패한 이유를 얼마나 빠르게 확인하냐는 테스트의 명확성에 달렸다
  + 명확한 테스트라 함은 존재 이유와 실패 원인을 엔지니어가 곧바로 알아차릴 수 있는 테스트를 말한다

* 완전하고 간결하게 만들어라
  + 완전성과 간결성은 테스트를 명확하게 만드는 데 도움되는 거시적인 특징
  + 완전한 테스트란 결과에 도달하기까지의 논리를 읽는 이가 이해하는 데 필요한 모든 정보를 본문에 담고 있는 테스트
  + 간결한 테스트란 코드가 산만하지 않고, 관련 없는 정보는 포함하지 않은 테스트

* 테스트를 더 명확하게 만들 수 있다면 DRY 원칙을 거스르는 게 나을 떄가 많다
  + 기억해라 '테스트 본문에는 테스트를 이해하는 데 필요한 정보를 모두 담아야 하며, 그와 동시에 눈을 어지럽히거나 관련 없는 정보는 담지 않아야 한다'

### 메서드가 아니라 행위를 테스트해라

* given/when/then

> 단위 테스트의 기술에서 말하는, AAA (Arrange, Act, Assert)와 같은 맥락인듯
> https://github.com/muhandojeon/The-Art-Of-Unit-Testing/blob/5b79474c549f86c7f5b4e09bf504c76e95136d3c/2%EC%9E%A5/%EC%98%A4%ED%98%9C%EC%84%B1.md?plain=1#L29

### 테스트에 논리를 넣지 마라

* 복잡성은 대체로 논리라는 형태로 나타난다
  + 논리는 프로그래밍 언어에서는 연산자, 반복문, 조건문을 이용해 표현된다

* 테스트에서는 논리가 조금만 들어가도 추론하기가 어려워진다

## DRY가 아니라 DAMP

- DAMP는 서술적이고 의미 있는 문구를 뜻함
  - Descriptive And Meaningful Phrase

- DRY 좀 고집하지 마라

- 테스트에서의 리팩터링은 반복을 줄이는 게 아니라 더 서술적이고 의미있게 하는 방향으로 이루어져야 한다

## 마치며

- 단위 테스트를 생각 없이 만들면 시스템에 대한 확신을 키워주는 건 고사하고, 시스템을 유지보수하거나 변경하기가 훨씬 어려워짐

## 핵심 정리

- 변하지 않는 테스트를 만들기 위해 노력해라
- API(인터페이스)를 테스트해라
- 테스트에 로직 넣지 마라

